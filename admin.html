<!DOCTYPE html>
<html>
<head>
<title>Admin Panel | ShoPperZ</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-cover bg-center min-h-screen" style="background-image:url('images/women-bg.jpg')">

<nav class="bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-600 p-4 text-white text-lg flex flex-wrap justify-center gap-4 shadow-xl">
  <a href="index.html">Home</a>
  <a href="shop.html">Shop</a>
</nav>

<div class="bg-white/90 p-10 rounded-2xl shadow-2xl w-[90%] max-w-4xl mx-auto mt-10">
<h2 class="text-4xl text-center font-bold text-indigo-900 mb-8">Admin Dashboard</h2>

<!-- Product Add Form -->
<div class="bg-pink-100 p-6 rounded-xl shadow-lg">
<h3 class="text-3xl font-semibold text-pink-800">Add New Product</h3>
<input id="pname" placeholder="Product Name" class="border-2 p-3 w-full mt-4 rounded-lg border-pink-600">
<input id="pprice" placeholder="Price" class="border-2 p-3 w-full mt-4 rounded-lg border-pink-600">
<input id="pimg" type="file" class="border-2 p-3 w-full mt-4 rounded-lg border-pink-600">
<button onclick="addProduct()" class="bg-green-600 text-white p-3 mt-6 rounded-lg text-xl w-full hover:scale-105 transition">Add Product</button>
</div>

<!-- Orders Table -->
<div class="mt-10 bg-indigo-100 p-6 rounded-xl shadow-lg">
<h3 class="text-3xl font-semibold text-indigo-900">Customer Orders</h3>
<div id="orders" class="mt-4 text-lg font-medium"></div>
</div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";

const firebaseConfig = { /* ðŸ”´ PASTE YOUR FIREBASE CONFIG HERE */ };
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);
const storage = getStorage(app);

// Admin Login check
window.adminLogin = function(){
  signInWithEmailAndPassword(auth, "admin@gmail.com", "admin123")
  .then(()=> alert("Admin Logged In"))
  .catch(err=> alert(err.message));
}

// Upload product + save details
window.addProduct = async function(){
  const file = pimg.files[0];
  const storageRef = ref(storage, "products/" + file.name);
  await uploadBytes(storageRef, file);
  const url = await getDownloadURL(storageRef);

  await addDoc(collection(db, "products"), {
    name: pname.value,
    price: pprice.value,
    image: url
  });

  alert("Product added!");
  location.reload();
}

// Load Orders
const orderSnap = await getDocs(collection(db, "orders"));
orders.innerHTML = orderSnap.docs.map(d=>`
  <div class='bg-white p-3 mt-2 rounded-lg shadow'>${JSON.stringify(d.data())}</div>
`).join("");
</script>

</body>
</html>
